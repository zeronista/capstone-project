<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{fragments/layout :: head(title='Thông báo')}">
  </head>
  <body
    class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-sans h-screen flex overflow-hidden"
  >
    <!-- Mobile Sidebar Backdrop -->
    <div th:replace="~{fragments/layout :: sidebar-backdrop}"></div>

    <!-- Patient Sidebar -->
    <aside th:replace="~{fragments/layout :: patient-sidebar}"></aside>

    <!-- Main Content -->
    <main
      class="flex-1 flex flex-col min-w-0 bg-background-light dark:bg-background-dark"
    >
      <!-- Header -->
      <header
        th:replace="~{fragments/header/unified-header :: unified-header}"
      ></header>

      <!-- Content Area -->
      <div class="flex-1 overflow-y-auto p-4 lg:p-6">
        <div class="max-w-5xl mx-auto flex flex-col gap-6">
          <!-- Page Header -->
          <div class="flex flex-col gap-2">
            <h1
              class="text-3xl font-black tracking-tight text-slate-900 dark:text-white"
            >
              Thông báo
            </h1>
            <p class="text-slate-500 dark:text-slate-400">
              Xem tất cả thông báo và cập nhật từ phòng khám
            </p>
          </div>

          <!-- Action Bar -->
          <div
            class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 bg-white dark:bg-[#1a2634] rounded-xl border border-slate-200 dark:border-slate-800 p-4"
          >
            <div class="flex items-center gap-3">
              <button
                id="filterAll"
                class="filter-btn active px-4 py-2 rounded-lg text-sm font-semibold transition-colors bg-primary text-white"
                data-filter="all"
              >
                Tất cả
              </button>
              <button
                id="filterUnread"
                class="filter-btn px-4 py-2 rounded-lg text-sm font-semibold transition-colors bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"
                data-filter="unread"
              >
                Chưa đọc
              </button>
            </div>
            <button
              id="markAllReadBtn"
              class="flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-semibold hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"
            >
              <span class="material-symbols-outlined text-[20px]"
                >done_all</span
              >
              Đánh dấu tất cả đã đọc
            </button>
          </div>

          <!-- Notifications List -->
          <div
            id="notificationsList"
            class="flex flex-col gap-3"
          >
            <!-- Loading State -->
            <div
              id="loadingState"
              class="flex items-center justify-center py-12 bg-white dark:bg-[#1a2634] rounded-xl border border-slate-200 dark:border-slate-800"
            >
              <div
                class="animate-spin rounded-full h-10 w-10 border-b-2 border-primary"
              ></div>
            </div>

            <!-- Empty State -->
            <div
              id="emptyState"
              class="hidden py-12 text-center bg-white dark:bg-[#1a2634] rounded-xl border border-slate-200 dark:border-slate-800"
            >
              <span
                class="material-symbols-outlined text-6xl mb-3 block text-slate-300 dark:text-slate-600"
                >notifications_off</span
              >
              <p class="text-slate-400">Không có thông báo nào</p>
            </div>

            <!-- Notifications will be dynamically inserted here -->
          </div>

          <!-- Pagination -->
          <div
            id="paginationContainer"
            class="hidden flex items-center justify-between bg-white dark:bg-[#1a2634] rounded-xl border border-slate-200 dark:border-slate-800 p-4"
          >
            <p class="text-sm text-slate-600 dark:text-slate-400">
              Hiển thị <span id="pageInfo">0</span> thông báo
            </p>
            <div class="flex gap-2">
              <button
                id="prevPageBtn"
                class="px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                disabled
              >
                Trước
              </button>
              <button
                id="nextPageBtn"
                class="px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                disabled
              >
                Sau
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <th:block th:replace="~{fragments/layout :: scripts}"></th:block>
    <script th:src="@{/js/modules/patient/notifications.js}"></script>
  </body>
</html>
